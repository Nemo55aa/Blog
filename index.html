<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>MyBlogByNoOne</title>
	</head>
	<body>
		<h1>
			============================<br>
			Hello, this is myBlog.<br>
			============================<br>
		</h1>
		<h2>
			----------------------------<br>
			技術的な勉強ブログ<br>
			minato.work1@gmail.com<br>
			https://github.com/Nemo55aa/<br>
			https://x.com/couyouniao85944<br>
			LinuC level1<br>
			----------------------------
		</h2>
		<h5>
			2025年1月19日　日曜日<br>
			ブログ開始<br>
			モチベーションの維持と自己紹介にすぐ出せるようなブログの作成を目的としてこのブログを作成<br>
			今のところGithubPagesを使うことにしている<br>
			現状考えているのはLinuxについて勉強したことを書いていくつもり。<br>
			主に自分で手を動かしたことや、他の人の公開した情報をもとに実施したこととの差分をこのブログに公開したい。<br>

			今日はLinuC Level201の勉強はさほどしなかった。
			以前見つけていたSAMという音声合成のソフトのForkを自分の環境で動くようにいじっていた
			年末年始にいじっていたときはサンプルのNationalAnthemOfAmericaを歌わせられなかったけど、
			今日やっと歌わせることができた。
			3時間ぐらい費やした割に原因は改行コードだったのだけど、
			途中途中GREPしたり、正規表現で置換やったりして、以前よりなんてことない編集作業が早く進むようになった気がする。
			LinuC level1、やっぱりとったかいがあった
			もともとIBM704での初の音声合成での歌で、DaisyBellを歌わせたというのが有名な話で、
			昔のIBMコンピュータについてかなんだか調べているときに出てきたんだったと思う。
			そのときのソースコードなりの資源を探したのだけど、流石に残っていなくて。
			それで、何かしら自分でやってやろうと思って、音声合成からアプローチして調べたんだ。
			それで、TexasInstrumentsのおもちゃとか、IntelTalkだったっけ。とか、いろいろ調べて、
			C64とかApple][とかで実装されたSAMを移植したソースを見つけた。
			それをさっそくForkして解析してやろうと思ったのが始まり。
			Twitterに載せたら知らない人からもいいねとか来て。
			モチベがシビルドンのぼりです。
			とりあえず今日はDaisy,Daisy,のところだけ歌わせてやろうと思ったけど、
			SAMの-pitchオプションの音程の指定方法が特殊で、中断。
			あしたも仕事なので今日は寝ることにした。

			<br>
			2025年1月28日　火曜日<br>
			I2C Linuxシュミプロ<br>
			引き続き201の勉強を続ける。先週はそれなりに残業が多くてシュミプロや勉強に割けなかったので、<br>
			こういう時にしっかりやっておく<br>
			201はLinuxのブートの話がいっぱい書かれていて面白い。<br>

			特に、今日は/sysディレクトリが仮想的なファイルシステムになっていて、ドライバなどの情報が格納されている<br>

			ということから、SAMの開発用に用意したLubuntuではどうなっているか実際にそのディレクトリに移動したり。<br>

			いろいろ調べているうちに、/sys/bus/i2c....ディレクトリでtps6591x...というような名前のファイルがあった<br>

			ので、これが何なのか調べてみるとTIの電源コントローラICであるということが分かった。<br>

			linux tps65910ディレクトリでtps6591x...というような名前のファイルがあった<br>

			ので、これが何なのか調べてみるとTIの電源コントローラICであるということが分かった。<br>

			tps65910 linuxで、調べてみると、<br>
			https://github.com/torvalds/linux/blob/master/drivers/mfd/tps65910.c <br>
			が出てきた。
			linuxには構造体で基底クラスのようなものが用意されていて、struct i2c_clientが何となくやっていることは知っていたので、しばらく読んでみたりした。<br>

			本体は.probe、.remove関数で、接続されたとき、切断されたときに呼ばれる問ことらしい。<br>

			よさそうなI2Cのデバイスを見つけたら、自分でドライバを書いてコントリビュートしてみたい。と思った。<br>

			僕の夢はtorvalds/linuxに含まれるファイルのどれかに自分の名前が載ることなので、もしそれがかなえば夢がかなったことになる。<br>

			それに、もし採用されればそれはエンジニアとしてもかなりのアピールポイントになると思う（あんまりそういう不純な動機ではコードを書くんではなくて、純粋に好奇心だけでやりたいけど、そうもいかないよな。。。）<br>


			以前にPICでのI２Cの学習用に買った温度センサーがあるので、それ用のドライバをローカルで開発してみようと思う。カーネルに採用されるかどうかは別問題だし、Linuxのコミュニティが具体的にどうそういうことをやっているのかも、もう少し勉強する必要があると思うから。<br>

			さらに<br>

			www.kernel.org/doc/html/v6.1/translations/ja_JP/howto.html               、<br>

			というサイトも見つけた。<br>

			とくに、<br>

			https://kernelnewbies.org/FirstKernelPatch<br>

			は自分の環境でもやってみようと思う。<br>

			問題はマザーボードって、I2CのSCL/SDAが出ているようなピンがあったりするんだろうか？<br>

			
			https://blog.goediy.com/?p=1800<br>


			VGAにディスプレイと通信用のためのI2Cポートがいるらしい。<br>

			すでにドライバの存在するデバイスのモノを持っているなら、そこにつなげて、<br>

			/sys/bus/i2c/devices/i2c-*/new_device<br>

			に書き込んでやるだけでカーネルは認識するようになるらしい。<br>

			上記のブログではI2C接続のI/Oエキスパンダをつなげているらしく、sudo gpiodetect し、gpioinfoすると状態を取得できるという。<br>

			まずはこのブログの通りにやってみるのが確実かもしれない<br>


			●やることまとめ<br>
			・Linuxのカーネルにパッチを充てるときのことや、コミュニティについてLinux orgのドキュメンテーションで学習する<br>
			（とくに、　https://docs.kernel.org/translations/ja_JP/process/howto.html )<br>
			・カーネルに対してアクションするしないにかかわらず、ローカルで温度センサなどのI2Cデバイスから情報を読み取るドライバを作ってみる<br>
			・上のブログをできる限りその通りにやってみる<br>
			<br>
			<br>
			2025/02/03 月曜日
			今日は節分ということで、自分の中の鬼を追い払うようにして自己学習にいそしんでいる。
			以前のsysfsでI2Cデバイスを扱う方法について、進展がったので記述しておく。
			あの後メルカリで360円ほどのVGAケーブルを購入して、届いたのだが本当ならThinkpadでやろうと思っていたのに、
			学生時代からの相棒だったはずのX250がうんともすんとも言わなくなってしまった。。。
			ある日突然やってくるものなのだよう。。。
			だけど、以前PICで動かした実績のある温度センサLM75Bについて、Linuxのドライバがあるらしいことが下記で判明した。ので、メモしておく。
			<br>
			https://github.com/torvalds/linux/blob/master/drivers/hwmon/lm75.c
			<br>
			<br>
			https://www.si-linux.co.jp/catwiki/index.php?I2C%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9%E3%81%AE%E6%89%B1%E3%81%84%E6%96%B9
			<br>
			lm75bという名前で検索していたため以前はヒットしなかったようで、LM75ファミリまとめて一つのドライバのソースファイルになっているようだ。<br>
			Linuxではドライバ開発対象のセンサやコントローラをファミリで一つのソースでまとめてしまって管理するというのも一つの勉強にはなった。<br>
			（まぁ、今回のようにI2Cなどコマンドが同一のもので同じ諸元が取得できるようなものは、<br>
			ソースコードを分ける意味もないのは割と直感的といえばそうなので、<br>
			当たり前といえば当たり前かもしれない。<br>
			が、こういう単純さこそLinuxエコシステムの良いところともいえるのかも。）<br>
			
			とりあえず、Thinkpadに”げんきのかけら”なりつかうことはできないので、別に使用していたジャンクのEliteBookを使おうと思う。<br>
			まずはVGAから配線を引き出すところかな。<br>
		</h5>                     
	</body>                       
</html>                           
                                  
                                  
